---
import Layout from "../../layouts/Layout.astro";
const listItem = [
  "Art",
  "Biography",
  "Business",
  "Children’s",
  "Christian",
  "Classics",
  "Comics",
  "Cookbooks",
  "Ebooks",
  "Fantasy",
  "Fiction",
  "Graphic Noverls",
  "Historical Fiction",
  "History",
  "Horror",
  "Memoir",
  "Music",
  "Mystery",
  "Nonfiction",
  "Poetry",
  "Psychology",
  "Romance",
  "Science",
  "Science Fiction",
  "Self Help",
  "Sports",
  "Thriller",
  "Travel",
  "Young Adult",
  "Art",
  "Biography",
  "Business",
  "Children’s",
  "Christian",
  "Classics",
  "Comics",
  "Cookbooks",
  "Ebooks",
  "Fantasy",
  "Fiction",
  "Graphic Noverls",
  "Historical Fiction",
  "History",
  "Horror",
  "Memoir",
  "Music",
  "Mystery",
  "Nonfiction",
  "Poetry",
  "Psychology",
  "Romance",
  "Science",
  "Science Fiction",
  "Self Help",
  "Sports",
  "Thriller",
  "Travel",
  "Young Adult",
];
---

<script>
  import MicroModal from "micromodal";

  MicroModal.init({
    onShow: (modal) => console.info(`${modal!.id} is shown`), // [1]
    onClose: (modal) => console.info(`${modal!.id} is hidden`), // [2]
    openTrigger: "data-custom-open", // [3]
    closeTrigger: "data-custom-close", // [4]
    openClass: "is-open", // [5]
    disableScroll: true, // [6]
    disableFocus: false, // [7]
    awaitOpenAnimation: false, // [8]
    awaitCloseAnimation: false, // [9]
    debugMode: true, // [10]
  });

  const book_recommendation = document.querySelector("#book-recommendation");
  const close_modal = document.querySelector("#close-modal");

  book_recommendation!.addEventListener("click", () => {
    MicroModal.show("modal-1");
  });

  close_modal!.addEventListener("click", () => {
    MicroModal.close("modal-1");
  });
</script>
<Layout title="Modal Choose Book">
  <section class="relative w-full bg-white py-6 xl:py-24">
    <div
      class="container mx-auto max-w-screen-xl space-y-6 px-4 xl:space-y-20 xl:px-12"
    >
      <header class="space-y-4 text-center xl:mb-7 xl:space-y-6">
        <h3 class="font-arvo text-2xl leading-7 xl:text-[34px] xl:leading-none">
          Rekomendasi Buku
        </h3>

        <p>Because Bedul liked...</p>
      </header>

      <div class="relative flex w-full flex-col items-center pt-4">
        <svg
          class="h-24 w-24"
          viewBox="0 0 102 102"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_14_34)">
            <path
              d="M47.449 100.965C48.1387 102.345 50.3802 102.345 51.0699 100.965C56.9322 90.2754 62.2772 79.4128 65.3808 67.6882C65.7257 65.964 63.829 64.2398 62.2772 65.2743C58.8288 67.6882 55.8977 70.6194 53.3114 74.0678C54.001 49.9289 57.277 24.9278 51.5871 1.13372C51.2423 -0.590493 48.3114 -0.24566 48.4838 1.47883C51.5871 26.135 49.1732 50.6188 48.8287 75.275C45.8975 72.6887 42.9664 70.1024 40.2076 67.5161C39.0007 66.3091 36.4141 66.9988 36.5865 69.0679C37.9662 80.4474 41.7594 91.1375 47.449 100.965ZM49.3457 80.4474C50.3802 81.9992 53.3114 81.6543 53.3114 79.2404C53.3114 79.068 53.3114 78.8956 53.3114 78.8956C55.3804 76.8265 57.277 74.7575 59.5185 72.6884C56.7598 80.6198 53.3113 88.0339 49.3459 95.448C45.8975 88.7236 43.3112 81.8267 41.9318 74.4126C43.8285 76.1368 45.8975 77.8611 47.7944 79.7577C48.1387 80.4474 48.8287 80.6198 49.3457 80.4474Z"
              fill="#242424"></path>
          </g>
          <defs>
            <clipPath id="clip0_14_34">
              <rect
                width="102"
                height="102"
                fill="white"
                transform="translate(102 102) rotate(-180)"></rect>
            </clipPath>
          </defs>
        </svg>

        <h5 class="my-4 text-center text-lg font-semibold leading-[22px]">
          He Discovered:
        </h5>

        <figure class="mb-10 flex items-center justify-center gap-2 xl:gap-10">
          <div class="mt-16 max-w-[180px] space-y-1.5 self-start text-right">
            <h5 class="text-lg font-semibold leading-6">
              I Used To Be A Miserable F*ck
            </h5>
            <p class="text-base font-normal leading-6">JOHN KIM~</p>
          </div>

          <img
            class="h-64 w-auto shadow-2xl 2xl:h-96"
            src="/book-photo-5.png"
            alt="Book 8"
          />

          <div class="mb-16 max-w-[180px] self-end">
            <h5 class="text-lg font-semibold leading-6">
              Steam Punk, Science, Fiction, Fantasy
            </h5>
          </div>
        </figure>

        <button
          id="book-recommendation"
          type="button"
          class="flex w-60 items-center justify-center rounded-full bg-[#128C55] px-6 py-4 font-bold text-white transition-all duration-300 ease-out hover:bg-[#128C55]/90"
        >
          Coba Rekomendasi Buku
        </button>
      </div>
    </div>
  </section>

  <div class="modal micromodal-slide" id="modal-1" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
      <div
        class="modal__container flex flex-col items-start rounded-none xl:rounded-2xl"
        role="dialog"
        aria-modal="true"
        aria-labelledby="modal-1-title"
      >
        <header
          class="flex h-[72px] w-full items-center justify-between bg-white px-4 py-6 xl:justify-center"
        >
          <h2
            class="text-center font-arvo text-xl leading-none xl:text-[34px]"
            id="modal-1-title"
          >
            Pilih rekomendasi
          </h2>

          <button id="close-modal" type="button" class="block xl:hidden">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M19.6649 18.0492C20.1117 18.496 20.1117 19.2183 19.6649 19.6651C19.442 19.888 19.1495 20 18.8569 20C18.5643 20 18.2718 19.888 18.0489 19.6651L12 13.6161L5.95107 19.6651C5.72822 19.888 5.43566 20 5.1431 20C4.85054 20 4.55798 19.888 4.33513 19.6651C3.88829 19.2183 3.88829 18.496 4.33513 18.0492L10.3841 12.0001L4.33513 5.95111C3.88829 5.50426 3.88829 4.78199 4.33513 4.33514C4.78197 3.88829 5.50423 3.88829 5.95107 4.33514L12 10.3842L18.0489 4.33514C18.4958 3.88829 19.218 3.88829 19.6649 4.33514C20.1117 4.78199 20.1117 5.50426 19.6649 5.95111L13.6159 12.0001L19.6649 18.0492Z"
                fill="#2E2E2E"></path>
            </svg>
          </button>
        </header>

        <main
          class="modal__content px-4 !font-source-sans xl:px-8"
          id="modal-1-content"
        >
          <div class="flex flex-wrap items-center justify-center gap-3">
            <ul class="flex w-full flex-row flex-wrap gap-3">
              {
                listItem.map((item) => {
                  return (
                    <li>
                      <input
                        type="checkbox"
                        id={item}
                        value={item}
                        class="peer hidden"
                        required=""
                      />
                      <label
                        for={item}
                        class="inline-flex w-full cursor-pointer items-center justify-between gap-3 rounded-full border border-[#EBEBEB] bg-white p-3 text-gray-500 hover:bg-gray-50 hover:text-gray-600 peer-checked:border-[#128C55] peer-checked:bg-[#128C55]/10 peer-checked:text-gray-600 xl:p-4"
                      >
                        <div class="w-full text-sm font-semibold xl:text-lg">
                          {item}
                        </div>
                        <svg
                          class="flex-shrink-0"
                          width="16"
                          height="20"
                          viewBox="0 0 16 20"
                          fill="none"
                          xmlns="http://www.w3.org/2000/svg"
                        >
                          <path
                            d="M8 2C3.58853 2 0 5.58853 0 10C0 14.4115 3.58853 18 8 18C12.4115 18 16 14.4108 16 10C16 5.58916 12.4115 2 8 2ZM8 16.7607C4.27266 16.7607 1.23934 13.728 1.23934 10C1.23934 6.27203 4.27266 3.23934 8 3.23934C11.7273 3.23934 14.7607 6.27203 14.7607 10C14.7607 13.728 11.728 16.7607 8 16.7607Z"
                            fill="#515151"
                          />
                          <path
                            d="M11.0987 9.32457H8.61998V6.84588C8.61998 6.50382 8.34298 6.2262 8.00029 6.2262C7.6576 6.2262 7.3806 6.50382 7.3806 6.84588V9.32457H4.90191C4.55923 9.32457 4.28223 9.6022 4.28223 9.94426C4.28223 10.2863 4.55923 10.5639 4.90191 10.5639H7.3806V13.0426C7.3806 13.3847 7.6576 13.6623 8.00029 13.6623C8.34298 13.6623 8.61998 13.3847 8.61998 13.0426V10.5639H11.0987C11.4414 10.5639 11.7184 10.2863 11.7184 9.94426C11.7184 9.6022 11.4414 9.32457 11.0987 9.32457Z"
                            fill="#515151"
                          />
                        </svg>
                      </label>
                    </li>
                  );
                })
              }
            </ul>
          </div>
        </main>

        <footer
          class="flex h-20 w-full items-center justify-between bg-[#F9F8F6] p-4 xl:px-8 xl:py-12"
        >
          <button class="text-2xl font-bold leading-7">0/5</button>
          <button
            class="rounded-full bg-[#128C55] px-6 py-4 font-source-sans text-base font-semibold leading-none tracking-widest text-white"
            data-micromodal-close
            aria-label="Close this dialog window">Selesai</button
          >
        </footer>
      </div>
    </div>
  </div>
</Layout>

<style>
  #overlay {
    background: linear-gradient(
      180deg,
      rgba(249, 248, 246, 0) 0%,
      #f9f8f6 100%
    );
  }

  .modal {
    font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir,
      helvetica neue, helvetica, ubuntu, roboto, noto, segoe ui, arial,
      sans-serif;
  }

  .modal__overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }

  .modal__container {
    background-color: #fff;
    max-width: 910px;
    max-height: 100vh;
    width: 100%;
    box-sizing: border-box;
  }

  .modal__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .modal__title {
    margin-top: 0;
    margin-bottom: 0;
    font-weight: 600;
    font-size: 1.25rem;
    line-height: 1.25;
    color: #00449e;
    box-sizing: border-box;
  }

  .modal__close {
    background: transparent;
    border: 0;
  }

  .modal__header .modal__close:before {
    content: "\2715";
  }

  .modal__content {
    line-height: 1.5;
    color: rgba(0, 0, 0, 0.8);
    height: calc(100vh - 152px);
    overflow-y: auto;
  }

  .modal__btn {
    font-size: 0.875rem;
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    background-color: #e6e6e6;
    color: rgba(0, 0, 0, 0.8);
    border-radius: 0.25rem;
    border-style: none;
    border-width: 0;
    cursor: pointer;
    -webkit-appearance: button;
    text-transform: none;
    overflow: visible;
    line-height: 1.15;
    margin: 0;
    will-change: transform;
    -moz-osx-font-smoothing: grayscale;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    transition: -webkit-transform 0.25s ease-out;
    transition: transform 0.25s ease-out;
    transition: transform 0.25s ease-out, -webkit-transform 0.25s ease-out;
  }

  .modal__btn:focus,
  .modal__btn:hover {
    -webkit-transform: scale(1.05);
    transform: scale(1.05);
  }

  .modal__btn-primary {
    background-color: #00449e;
    color: #fff;
  }

  /**************************\
Demo Animation Style
\**************************/
  @keyframes mmfadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes mmfadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes mmslideIn {
    from {
      transform: translateY(15%);
    }
    to {
      transform: translateY(0);
    }
  }

  @keyframes mmslideOut {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(-10%);
    }
  }

  .micromodal-slide {
    display: none;
  }

  .micromodal-slide.is-open {
    display: block;
  }

  .micromodal-slide[aria-hidden="false"] .modal__overlay {
    animation: mmfadeIn 0.3s cubic-bezier(0, 0, 0.2, 1);
  }

  .micromodal-slide[aria-hidden="false"] .modal__container {
    animation: mmslideIn 0.3s cubic-bezier(0, 0, 0.2, 1);
  }

  .micromodal-slide[aria-hidden="true"] .modal__overlay {
    animation: mmfadeOut 0.3s cubic-bezier(0, 0, 0.2, 1);
  }

  .micromodal-slide[aria-hidden="true"] .modal__container {
    animation: mmslideOut 0.3s cubic-bezier(0, 0, 0.2, 1);
  }

  .micromodal-slide .modal__container,
  .micromodal-slide .modal__overlay {
    will-change: transform;
  }
</style>
